<div class="p-3">
  <table [dataSource]="dataSource" class="bg-white" mat-table>

    <ng-container matColumnDef="title">
      <th *matHeaderCellDef mat-header-cell> Title</th>
      <td *matCellDef="let element" mat-cell> {{ element.title }}</td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="stage">
      <th *matHeaderCellDef mat-header-cell> Stage</th>
      <td *matCellDef="let element" mat-cell>
        <mat-form-field appearance="outline" class="w-100">
          <mat-select (ngModelChange)="updateStage($event, element)" [(ngModel)]="element.stage">
            <mat-option *ngFor="let stage of stages" [value]="stage">
              {{ stage }}
            </mat-option>
          </mat-select>
        </mat-form-field>

      </td>
    </ng-container>


    <!-- Weight Column -->
    <ng-container matColumnDef="startDate">
      <th *matHeaderCellDef mat-header-cell> Start Date</th>
      <td *matCellDef="let element" mat-cell> {{ element.startDate | date: 'MM/dd/yyyy' }}</td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="endDate">
      <th *matHeaderCellDef mat-header-cell> End date</th>
      <td *matCellDef="let element" mat-cell> {{ element.endDate | date: 'MM/dd/yyyy' }}</td>
    </ng-container>

    <ng-container matColumnDef="Descrpition">
      <th *matHeaderCellDef mat-header-cell> Description</th>
      <td *matCellDef="let element" mat-cell> {{ element.description }}</td>
    </ng-container>

    <ng-container matColumnDef="priority">
      <th *matHeaderCellDef mat-header-cell> Priority</th>
      <td *matCellDef="let element" mat-cell> {{ element.priority }}</td>
    </ng-container>


    <ng-container matColumnDef="actions">
      <th *matHeaderCellDef="let element" mat-header-cell>
        <div class="d-flex justify-content-end gap-3 align-items-center pe-3">
          <button (click)="openDialog()" class="btn btn-primary btn-sm text-white">
            New task
          </button>
        </div>
      </th>

      <td *matCellDef="let element" mat-cell>
        <div class="d-flex justify-content-end gap-3 align-items-center pe-3">
          <button (click)="editTask(element)" class="text-muted"
                  color="warn" mat-icon-button>
            <mat-icon>edit</mat-icon>
          </button>
          <button
            (click)="deleteTask(element.id)"
            aria-label="Delete task"
            class="text-primary"
            color="warn"
            mat-icon-button
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </td>
    </ng-container>


    <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
    <tr (dblclick)="viewTask(task)" *matRowDef="let task; columns: displayedColumns;" mat-row>></tr>
  </table>


</div>
